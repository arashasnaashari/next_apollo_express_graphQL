<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>I</title>
    <style>
      body {
        background: #212121;
      }
    </style>
  </head>
  <body>
    <input type="text" placeholder="search .. " id="input" />

    <div id="div"></div>

    <script>
      let DB = [
        {
          title: "title 1",
          author: "author 1",
          group: "G_A",
          publication: "P_A",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "6",
          star: "5",
        },
        {
          title: "title 2",
          author: "author 2",
          group: "G_A",
          publication: "P_A",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "1",
          star: "5",
        },
        {
          title: "title 3",
          author: "author 1",
          group: "G_B",
          publication: "P_B",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "2",
          star: "5",
        },
        {
          title: "title 4",
          author: "author 3",
          group: "G_B",
          publication: "P_B",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "55",
          star: "4",
        },
        {
          title: "title 5",
          author: "author 1",
          group: "G_C",
          publication: "P_C",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "5",
          star: "3",
        },
        {
          title: "title 6",
          author: "author 2",
          group: "G_C",
          publication: "P_C",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "44",
          star: "2",
        },
        {
          title: "title 7",
          author: "author 1",
          group: "G_D",
          publication: "P_D",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "6",
          star: "4",
        },
        {
          title: "title 1",
          author: "author 1",
          group: "G_A",
          publication: "P_A",
          price: "20",
          image:
            "https://s3.amazonaws.com/AKIAJC5RLADLUMVRPFDQ.book-thumb-images/ableson.jpg",
          boughtNumber: "66",
          star: "2",
        },
      ];
      const input = document.getElementById("input");
      const div = document.getElementById("div");
      //SEARCH
      // const searchBooks = (searchText) => {
      //   let matches = DB.filter((book) => {
      //     const regex = new RegExp(`${searchText}`, `gi`);
      //     return book.author.match(regex), book.title.match(regex);
      //   });

      //   if (searchText.length === 0 && matches.length === 0) {
      //     div.innerHTML = "nothing";
      //   }
      //   if (searchText.length === 0) {
      //     matches = [];
      //     div.innerHTML = "";
      //   }

      //   outputHTML(matches);
      // };

      // const outputHTML = (matches) => {
      //   if (matches.length > 0) {
      //     const html = matches
      //       .map(
      //         (match) => `
      //      <div>
      //       <h1>${match.author}</h1>
      //       </div>
      //      `
      //       )
      //       .join("");
      //     div.innerHTML = html;
      //   }
      // };

      // input.addEventListener("input", () => {
      //   searchBooks(input.value);
      // });

      input.addEventListener("input", (e) => {
        let complitedResult = [];

        if (e.target.value) { 
          complitedResult = DB.filter((fruit) => {
            return (
              fruit.title.toLowerCase().trim().includes(e.target.value) ||
              fruit.author.toLowerCase().trim().includes(e.target.value)
            );
          });
          complitedResult = complitedResult.map(
            (fruit) => `<li>${fruit.title} | ${fruit.author}</li>`
          );
        }

        showcomplitedResult(complitedResult);
      });

      function showcomplitedResult(complitedResult) {
        const html = !complitedResult.length ? "" : complitedResult.join("");
        document.querySelector("div").innerHTML = html;
      }
    </script>
  </body>
</html>
